{% extends "registration/registration_base.html" %}
{% load i18n %}

{% load static %}

{% block title %}{% trans "Log in" %}{% endblock %}

{% block links %}
    <link href="https://fonts.googleapis.com/css2?family=Notable&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="{% static 'css/login_style.css' %}">
{% endblock %}

{% block styles %}
    .filt {
        position: relative;
        filter: url(#filt);
        width: 100%;
        height: 100%;
    }
    .pointer {
        z-index: 1000;
        position: absolute;
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background-image: linear-gradient(aqua, bisque);
        box-shadow: 0 0 190px aquamarine;
    }
    #pointer_2 {
        width: 70px;
        height: 70px;
    }
    .bubble {
        z-index: 3;
        position: absolute;
        width: 70px;
        height: 70px;
        box-shadow: 0 0 100px aquamarine;
        background-image: linear-gradient(aqua, bisque);
        border-radius: 50%;
    }
     .btn_span {
        z-index: 100;
        position: absolute;
        background: purple;
        box-shadow: 0 0 100px purple;
        transform: translate(-50%, -50%);
        pointer-events: none;
        border-radius: 50%;
        animation: animate 1s linear infinite;
    }
    .container.active .btn_span {
        background: #ffee22;

    }
    @keyframes animate {
        0% {
            width: 0;
            height: 0;
            opacity: 0.7;
        }
        100% {
            height: 1000px;
            width: 1000px;
            opacity: 0;
            background: red;
        }
    }
    .b1 {
        width: 90px;
        height: 90px;
        animation: bubble_1 20s infinite;
        /* animation-delay: 1s; */
    }
    .b2 {
        background-image: linear-gradient(to left, aqua, bisque);
        animation: bubble_2 18s infinite;
        /* animation-delay: 2s; */
    }
    .b3 {
        animation: bubble_3 20s infinite;
        animation-delay: .3s;
    }
    .b4 {
        background-image: linear-gradient(to left, aqua, bisque);
        width: 120px;
        height: 120px;
        animation: bubble_4 16s infinite;
        animation-delay: .7s;
    }
    .b5 {
        background-image: linear-gradient(to left, aqua, bisque);
        width: 100px;
        height: 100px;
        animation: bubble_5 15s infinite;
        /* animation-delay: 5s; */
    }
    .b6 {
        background-image: linear-gradient(to right, aqua, bisque);
        width: 80px;
        height: 80px;
        animation: bubble_6 17s infinite;
    }
    @keyframes bubble_1 {
        0% {
            top: 200px;
            left: 300px;
        }
        25% {
            top: 120px;
            left: 40px;
        }
        50% {
            top: 10px;
            left: 10px;
        }
        100% {
            top: 200px;
            left: 300px;
        }
    }
    @keyframes bubble_2 {
        0% {
            top: 330px;
            left: 20px;
        }
        25% {
            top: 20px;
            left: 200px;
        }
        50% {
            top: 140px;
            left: 180px;
        }
        100% {
            top: 330px;
            left: 20px;
        }
    }
    @keyframes bubble_4 {
        0% {
            top: 20px;
            left: 70px;
        }
        25% {
            top: 250px;
            left: 300px;
        }
        50% {
            top: 440px;
            left: 180px;
        }
        100% {
            top: 20px;
            left: 70px;
        }
    }
    @keyframes bubble_3 {
        0% {
            top: 40px;
            left: 0px;
        }
        50% {
            top: 300px;
            left: 200px;
        }
        100% {
            top: 40px;
            left: 0px;
        }
    }
    @keyframes bubble_5 {
        0% {
            top: 410px;
            left: 100px;
        }
        25% {
            top: 300px;
            left: 150px;
        }
        50% {
            top: 400px;
            left: 20px;
        }
        100% {
            top: 410px;
            left: 100px;
        }
    }
    @keyframes bubble_6 {
        0% {
            top: 10px;
            left: 200px;
        }
        25% {
            top: 25px;
            left: 100px;
        }
        50% {
            top: 10px;
            left: 20px;
        }
        100% {
            top: 10px;
            left: 200px;
        }
    }
    .block p {
        z-index: 100;
        position: relative;
    }
    * {
        /* display: none; */
    }
{% endblock %}

{% block content %}
    <section>
        <div class="container active">
            <div class="form sign_in_bx">
                <div class="block">
                    <div class="filt">
                        <div class="bubble b4"></div>
                        <div class="bubble b1"></div>
                        <div class="bubble b2"></div>
                        <div class="bubble b3"></div>
                        <div class="bubble b5"></div>
                        <div class="bubble b6"></div>
                        <!-- <div class="pointer"></div> -->
                        <div class="pointer" id="pointer_1"></div>
                        <div class="pointer" id="pointer_2"></div>
                        <!-- <div class="pointer" id="pointer_3"></div>
                        <div class="pointer" id="pointer_4"></div>
                        <div class="pointer" id="pointer_5"></div> -->
                    </div>
                </div>
                <div class="form_bx">
                    <form method="post" action="">
                        {% csrf_token %}
                        <h2>Залогиниться</h2>
                        <p class="signup">
<!--                            <label for="id_username">{% trans "Username" %}:</label>-->
                            <input type="text" name="username" autofocus required id="id_username" placeholder="{% trans 'Username' %}">
                        </p>
                        <p class="signup">
<!--                            <label for="id_password">{% trans "Password" %}:</label>-->
                            <input type="password" name="password" required id="id_password" placeholder="{% trans 'Password' %}">
                        </p>
<!--                        <p class="notice invis no_match">login or password incorrect</p>-->
                        <input type="submit" value="{% trans 'Log in' %}" />
                        <input type="hidden" name="next" value="{{ next }}" />
                        <p class="signup">{% trans "Forgot your password?" %} <a href="{% url 'auth_password_reset' %}">{% trans "Reset it" %}</a>.</p>
                        <p class="signup">{% trans "Not a member?" %} <a href="{% url 'registration_register' %}">{% trans "Register" %}</a>.</p>
<!--                        <p class="signup">{% trans "Not a member?" %} <a onclick="func();" href="#">{% trans "Register" %}</a>.</p>-->
                    </form>
                </div>
            </div>

            <!-- <div class="form sign_up_bx">
                <div class="form_bx">
                    <form>
                        <h2>Create an account</h2>
                        <input type="text" name="" placeholder="Username">
                        <p class="notice min_len user invis">username length must be at least 3 characters</p>
                        <p class="notice min_len user invis busy">this username is busy</p>
                        <input type="email" name="" placeholder="Email Address">
                        <p class="notice email invis">incorrect email address</p>
                        <p class="notice email invis busy">this email address is busy</p>
                        <input type="password" name="" placeholder="Password">
                        <p class="notice min_len pwd invis">password length must be at least 7 characters</p>
                        <p class="notice cappital pwd invis">password must contain at least one capital letter</p>
                        <input class="second_password" type="password" name="" placeholder="Confirm Password">
                        <p class="notice match invis">passwords don't match</p>
                        <input type="submit" name="" value="Sign Up">
                        <p class="signup">Already have an account? <a onclick="func();" href="#">Sign In.</a></p>
                    </form>
                </div>
                <div class="block">
                    <div class="filt sec">
                        <div class="bubble b4"></div>
                        <div class="bubble b1"></div>
                        <div class="bubble b2"></div>
                        <div class="bubble b3"></div>
                        <div class="bubble b5"></div>
                        <div class="bubble b6"></div>
                        <div class="pointer" id="pointer_1"></div>
                        <div class="pointer" id="pointer_2"></div>
                        <div class="pointer" id="pointer_3"></div>
                    </div>
                </div>
            </div> -->
        </div>
    </section>
    <svg style="display: none;">
        <filter id="filt">
            <feGaussianBlur in="SourceGraphic" stdDeviation="13"/>
            <feColorMatrix
            values= "
            1 0 0 0 0
                0 1 0 0 0
                0 0 1 0 0
                0 0 0 15 -8
                "
                />
        </filter>
    </svg>
{% endblock %}

{% block end_content %}
{% endblock %}

{% block body_scripts %}
    {{ block.super }}
    <script type="text/javascript">
        active = true;
        flag = false;

        function func() {
            var cont = document.querySelector(".container");
            cont.classList.toggle('active');
            if (active)
                active = false;
            else
                active = true;
        }

        $(document).ready(function() {
            func();
        });

        document.querySelector(".sign_in_bx .block").addEventListener("mousemove", function(e) {
            var target = e.target.closest('.filt');
            try {
                var targetCoords = target.getBoundingClientRect();
                var x = e.clientX - targetCoords.left;
                var y = e.clientY - targetCoords.top;
                var pointer = document.querySelector(".pointer");
                pointer.style.top = y - 40 + "px";
                pointer.style.left = x - 40 + "px";
            } catch {

            }
        });
        document.querySelector(".sign_in_bx .block").addEventListener("click", function(e) {
                var target = e.target.closest('.filt');
                var targetCoords = target.getBoundingClientRect();
                var x = e.clientX - targetCoords.left;
                var y = e.clientY - targetCoords.top;

                let span = document.createElement("span");
                span.classList.add("btn_span");
                span.style.left = x + "px";
                span.style.top = y + "px";
                document.querySelector(".filt").appendChild(span);
                setTimeout(() => { span.remove() }, 1000);
            });
    </script>
{% endblock %}

{% comment %}
**registration/login.html**

It's your responsibility to provide the login form in a template called
registration/login.html by default. This template gets passed four
template context variables:

``form``
    A Form object representing the login form. See the forms
    documentation for more on Form objects.

``next``
    The URL to redirect to after successful login. This may contain a
    query string, too.

``site``
    The current Site, according to the SITE_ID setting. If you don't
    have the site framework installed, this will be set to an instance
    of RequestSite, which derives the site name and domain from the
    current HttpRequest.

``site_name``
    An alias for site.name. If you don't have the site framework
    installed, this will be set to the value of
    request.META['SERVER_NAME']. For more on sites, see The
    "sites" framework.

BEFORE:
<form method="post" action="">
    {% csrf_token %}
    {{ form.as_p }}
    <input type="submit" value="{% trans 'Log in' %}" />
    <input type="hidden" name="next" value="{{ next }}" />
</form>

<p>{% trans "Forgot your password?" %} <a href="{% url 'auth_password_reset' %}">{% trans "Reset it" %}</a>.</p>
<p>{% trans "Not a member?" %} <a href="{% url 'registration_register' %}">{% trans "Register" %}</a>.</p>

{% endcomment %}
