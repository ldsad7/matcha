{% extends "base.html" %}

{% block title %}Чаты{% endblock %}

{% block content %}
    {{ block.super }}
    <div style="display: flex; justify-content: center; flex-direction: column;">
        <div style="display: flex; justify-content: center; margin-top: 15px;">
            {% for user in users %}
                <button id="room-name-{{ forloop.counter0 }}" style="padding:10px;">{{ user.username }}</button>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block body_scripts %}
    <script>
        {% for user in users %}
            document.getElementById("room-name-{{ forloop.counter0 }}").addEventListener("click", function (e) {
                let roomName = ["{{ global_user.username }}", "{{ user.username }}"].sort().join('_');
                window.location.pathname = '/chat/' + roomName + '/';
            });
        {% endfor %}
    </script>
{% endblock %}
