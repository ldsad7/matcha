{% extends "base.html" %}

{% block title %}Чаты{% endblock %}

{% block content %}
    {{ block.super }}
    <div style="display: flex; justify-content: center; flex-direction: column;">
<!--        <div style="display: flex; justify-content: center;">-->
<!--            <p style="color: #e2e2e2;">What chat room would you like to enter?</p>-->
<!--        </div>-->
<!--        <div style="display: flex; justify-content: center; margin-top: 15px;">-->
<!--            <input id="room-name-input" type="text" size="100"><br>-->
<!--            <input style="margin-left: 5px;" id="room-name-submit" type="button" value="Enter">-->
<!--        </div>-->
        <div style="display: flex; justify-content: center; margin-top: 15px;">
            {% for user in users %}
                <button id="room-name-{{ forloop.counter0 }}" style="padding:10px;">{{ user.username }}</button>
            {% endfor %}
        </div>
    </div>
{% endblock %}

{% block body_scripts %}
    <script>
        // document.querySelector('#room-name-input').focus();
        // document.querySelector('#room-name-input').onkeyup = function(e) {
        //     if (e.keyCode === 13) {  // enter, return
        //         document.querySelector('#room-name-submit').click();
        //     }
        // };
        // document.querySelector('#room-name-submit').onclick = function(e) {
        //     var roomName = document.querySelector('#room-name-input').value;
        //     window.location.pathname = '/chat/' + roomName + '/';
        // };

        {% for user in users %}
            document.getElementById("room-name-{{ forloop.counter0 }}").addEventListener("click", function (e) {
                let roomName = ["{{ global_user.username }}", "{{ user.username }}"].sort().join('_');
                window.location.pathname = '/chat/' + roomName + '/';
            });
        {% endfor %}
    </script>
{% endblock %}
